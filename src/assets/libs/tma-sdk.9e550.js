(function(root){var exports=undefined,module=undefined,require=undefined;var define=undefined;var self=root,window=root,global=root,globalThis=root;(function(){var TmaSdk=function(R){"use strict";let se;function xn(e,t){se?se.set(e,t):t();}function ve(e){if(se)return e();se=new Map();try{e();}finally{se.forEach(t=>t()),se=void 0;}}function j(e,t){t||(t={});const n=t.equals||Object.is;let r=[],i=e;const s=c=>{if(!n(i,c)){const h=i;i=c,xn(l,()=>{[...r].forEach(([f,b])=>{f(c,h),b&&u(f,!0);});});}};function a(c){const h=typeof c!="object"?{once:c}:c;return{once:h.once||!1,signal:h.signal||!1};}const u=(c,h)=>{const f=a(h),b=r.findIndex(([w,C])=>w===c&&C.once===f.once&&C.signal===f.signal);b>=0&&r.splice(b,1);},l=Object.assign(function(){return Tn(l),i;},{destroy(){r=[];},set:s,reset(){s(e);},sub(c,h){return r.push([c,a(h)]),()=>u(c,h);},unsub:u,unsubAll(){r=r.filter(c=>c[1].signal);}});return l;}const le=[];function Tn(e){le.length&&le[le.length-1].add(e);}function y(e,t){let n=new Set(),r;function i(){return r||(r=j(a(),t));}function s(){i().set(a());}function a(){n.forEach(c=>{c.unsub(s,{signal:!0});});const u=new Set();let l;le.push(u);try{l=e();}finally{le.pop();}return u.forEach(c=>{c.sub(s,{signal:!0});}),n=u,l;}return Object.assign(function(){return i()();},{destroy(){i().destroy();},sub(...u){return i().sub(...u);},unsub(...u){i().unsub(...u);},unsubAll(...u){i().unsubAll(...u);}});}let Oe;function St(e){return{lang:e?.lang??Oe?.lang,message:e?.message,abortEarly:e?.abortEarly??Oe?.abortEarly,abortPipeEarly:e?.abortPipeEarly??Oe?.abortPipeEarly};}let In;function Pn(e){return In?.get(e);}let Mn;function Bn(e){return Mn?.get(e);}let jn;function Vn(e,t){return jn?.get(e)?.get(t);}function Rn(e){const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t;}function O(e,t,n,r,i){const s=i&&"input"in i?i.input:n.value,a=i?.expected??e.expects??null,u=i?.received??Rn(s),l={kind:e.kind,type:e.type,input:s,expected:a,received:u,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",h=i?.message??e.message??Vn(e.reference,l.lang)??(c?Bn(l.lang):null)??r.message??Pn(l.lang);h!==void 0&&(l.message=typeof h=="function"?h(l):h),c&&(n.typed=!1),n.issues?n.issues.push(l):n.issues=[l];}function D(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},St());}};}function kt(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor";}function On(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never";}var Ln=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e;}};function ye(e,t){return{kind:"validation",type:"check",reference:ye,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&O(this,"input",n,r),n;}};}function Ft(e){return{kind:"validation",type:"integer",reference:Ft,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&O(this,"integer",t,n),t;}};}function K(e){return{kind:"transformation",type:"transform",reference:K,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t;}};}function Dn(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback;}function Le(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default;}function $t(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues;}function X(e){return{kind:"schema",type:"boolean",reference:X,expects:"boolean",async:!1,message:e,get"~standard"(){return D(this);},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:O(this,"type",t,n),t;}};}function Et(e){return{kind:"schema",type:"date",reference:Et,expects:"Date",async:!1,message:e,get"~standard"(){return D(this);},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?O(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:O(this,"type",t,n),t;}};}function De(e){return{kind:"schema",type:"function",reference:De,expects:"Function",async:!1,message:e,get"~standard"(){return D(this);},"~run"(t,n){return typeof t.value=="function"?t.typed=!0:O(this,"type",t,n),t;}};}function We(e,t){return{kind:"schema",type:"instance",reference:We,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return D(this);},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:O(this,"type",n,r),n;}};}function V(e,t){return{kind:"schema",type:"loose_object",reference:V,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return D(this);},"~run"(n,r){const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const s in this.entries){const a=this.entries[s];if(s in i||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=s in i?i[s]:Le(a),l=a["~run"]({value:u},r);if(l.issues){const c={type:"object",origin:"value",input:i,key:s,value:u};for(const h of l.issues)h.path?h.path.unshift(c):h.path=[c],n.issues?.push(h);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break;}}l.typed||(n.typed=!1),n.value[s]=l.value;}else if(a.fallback!==void 0)n.value[s]=Dn(a);else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(O(this,"key",n,r,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:i,key:s,value:i[s]}]}),r.abortEarly))break;}if(!n.issues||!r.abortEarly)for(const s in i)kt(i,s)&&!(s in this.entries)&&(n.value[s]=i[s]);}else O(this,"type",n,r);return n;}};}function ie(e,t){return{kind:"schema",type:"nullish",reference:ie,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return D(this);},"~run"(n,r){return(n.value===null||n.value===void 0)&&(this.default!==void 0&&(n.value=Le(this,n,r)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r);}};}function oe(e){return{kind:"schema",type:"number",reference:oe,expects:"number",async:!1,message:e,get"~standard"(){return D(this);},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:O(this,"type",t,n),t;}};}function k(e,t){return{kind:"schema",type:"optional",reference:k,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return D(this);},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Le(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r);}};}function At(e,t,n){return{kind:"schema",type:"record",reference:At,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return D(this);},"~run"(r,i){const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const a in s)if(kt(s,a)){const u=s[a],l=this.key["~run"]({value:a},i);if(l.issues){const h={type:"object",origin:"key",input:s,key:a,value:u};for(const f of l.issues)f.path=[h],r.issues?.push(f);if(r.issues||(r.issues=l.issues),i.abortEarly){r.typed=!1;break;}}const c=this.value["~run"]({value:u},i);if(c.issues){const h={type:"object",origin:"value",input:s,key:a,value:u};for(const f of c.issues)f.path?f.path.unshift(h):f.path=[h],r.issues?.push(f);if(r.issues||(r.issues=c.issues),i.abortEarly){r.typed=!1;break;}}(!l.typed||!c.typed)&&(r.typed=!1),l.typed&&(r.value[l.value]=c.value);}}else O(this,"type",r,i);return r;}};}function m(e){return{kind:"schema",type:"string",reference:m,expects:"string",async:!1,message:e,get"~standard"(){return D(this);},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:O(this,"type",t,n),t;}};}function xt(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t;}function we(e,t){return{kind:"schema",type:"union",reference:we,expects:On(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return D(this);},"~run"(n,r){let i,s,a;for(const u of this.options){const l=u["~run"]({value:n.value},r);if(l.typed){if(l.issues)s?s.push(l):s=[l];else{i=l;break;}}else a?a.push(l):a=[l];}if(i)return i;if(s){if(s.length===1)return s[0];O(this,"type",n,r,{issues:xt(s)}),n.typed=!0;}else{if(a?.length===1)return a[0];O(this,"type",n,r,{issues:xt(a)});}return n;}};}function qe(){return{kind:"schema",type:"unknown",reference:qe,expects:"unknown",async:!1,get"~standard"(){return D(this);},"~run"(e){return e.typed=!0,e;}};}function he(e,t,n){const r=e["~run"]({value:t},St(n));if(r.issues)throw new Ln(r.issues);return r.value;}function J(...e){return{...e[0],pipe:e,get"~standard"(){return D(this);},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break;}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n));}return t;}};}var Wn=Object.defineProperty,qn=(e,t,n)=>t in e?Wn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tt=(e,t,n)=>qn(e,typeof t!="symbol"?t+"":t,n),Un=Object.defineProperty,Nn=(e,t,n)=>t in e?Un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ue=(e,t,n)=>Nn(e,typeof t!="symbol"?t+"":t,n);function It(e){return t=>t instanceof e;}function Pt(e,t){const n=class extends Error{constructor(...i){const s=typeof t=="function"?t(...i):typeof t=="string"?[t]:t||[];super(...s),this.name=e;}};Ue(n,"is",It(n));let r=n;return Object.defineProperty(r,"name",{value:e}),r;}function Gn(e,t,n){const r=class extends Pt(e,n){constructor(...s){super(...s),Ue(this,"data"),this.data=t(...s);}};Ue(r,"is",It(r));let i=r;return Object.defineProperty(i,"name",{value:e}),i;}let Hn=class extends Pt("CancelledError","Promise was canceled"){},Mt=class extends Gn("TimeoutError",t=>({timeout:t}),(t,n)=>[`Timeout reached: ${t}ms`,{cause:n}]){};const Jn=Symbol("resolved");function zn(e){return{tag:Jn,value:e};}function Bt(e,t){return e.reject=t.reject,e.resolve=t.resolve,e;}let Ne=class Ct extends Promise{constructor(t,n){let r,i,s,a;typeof t=="function"?(s=t,a=n||{}):a=t||{};let u,l;const c=()=>!!l,h=()=>!!u;let f={};const b=[],w=()=>{b.forEach(_=>_()),b.splice(0,b.length),f={};},C=new AbortController(),$=()=>h()||c();super((_,g)=>{const{abortOnResolve:p=!0,abortOnReject:T=!0}=a;i=v=>{var A,E;$()||(_(v),u=[v],(A=f.resolved)==null||A.forEach(M=>M(v)),(E=f.finalized)==null||E.forEach(M=>M({kind:"resolved",result:v})),w(),p&&C.abort(zn(v)));},r=v=>{var A,E;$()||(g(v),l=[v],(A=f.rejected)==null||A.forEach(M=>M(v)),(E=f.finalized)==null||E.forEach(M=>M({kind:"rejected",reason:v})),w(),T&&C.abort(v));};const{abortSignal:I}=a;if(I){if(I.aborted)return r(I.reason);const v=()=>{r(I.reason);};I.addEventListener("abort",v,!0),b.push(()=>{I.removeEventListener("abort",v,!0);});}const{timeout:P}=a;if(P){const v=setTimeout(()=>{r(new Mt(P));},P);b.push(()=>{clearTimeout(v);});}try{const v=()=>{},A=s&&s(i,r,{abortSignal:C.signal,get isRejected(){return c();},get isResolved(){return h();},on(E,M){if(u||l){if(E==="finalized"){const ce=u?{kind:"resolved",result:u[0]}:{kind:"rejected",reason:l[0]};M(ce);}else E==="resolved"&&u?M(u[0]):E==="rejected"&&l&&M(l[0]);return v;}return f[E]||(f[E]=[]),f[E].push(M),()=>{const ce=f[E]||[],me=ce.indexOf(M);me>=0&&ce.splice(me,1);};},get result(){return u?.[0];},get rejectReason(){return l?.[0];},throwIfRejected(){if(l)throw l[0];}});A instanceof Promise&&A.catch(r);}catch(v){r(v);}}),Tt(this,"reject"),Tt(this,"resolve"),this.reject=r,this.resolve=i;}static fn(t,n){return new Ct(async(r,i,s)=>{try{r(await t(s));}catch(a){i(a);}},n);}static resolve(t){return this.fn(()=>t);}static reject(t){return new Ct((n,r)=>{r(t);});}cancel(){this.reject(new Hn());}catch(t){return this.then(void 0,t);}finally(t){return Bt(super.finally(t),this);}then(t,n){return Bt(super.then(t,n),this);}};var Kn=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t));};function jt(e,t,n,r,i,s,a,u,l){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments));};case 3:return function(){return n(t(e.apply(this,arguments)));};case 4:return function(){return r(n(t(e.apply(this,arguments))));};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))));};case 6:return function(){return s(i(r(n(t(e.apply(this,arguments))))));};case 7:return function(){return a(s(i(r(n(t(e.apply(this,arguments)))))));};case 8:return function(){return u(a(s(i(r(n(t(e.apply(this,arguments))))))));};case 9:return function(){return l(u(a(s(i(r(n(t(e.apply(this,arguments)))))))));};}}function d(e,t,n,r,i,s,a,u,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return s(i(r(n(t(e)))));case 7:return a(s(i(r(n(t(e))))));case 8:return u(a(s(i(r(n(t(e)))))));case 9:return l(u(a(s(i(r(n(t(e))))))));default:{for(var c=arguments[0],h=1;h<arguments.length;h++)c=arguments[h](c);return c;}}}var pe=function(e,t){var n=typeof e=="number"?function(r){return r.length>=e;}:e;return function(){var r=Array.from(arguments);return n(arguments)?t.apply(this,r):function(i){return t.apply(void 0,Kn([i],r,!1));};};},Xn={_tag:"None"},Zn=function(e){return{_tag:"Some",value:e};},Qn=function(e){return e._tag==="Left";},Vt=function(e){return{_tag:"Left",left:e};},Rt=function(e){return{_tag:"Right",right:e};},Ge={};function Yn(e,t){return function(n){return function(r){return e.ap(e.map(r,function(i){return function(s){return t.ap(i,s);};}),n);};};}function er(e,t){return function(n){return function(r){return e.map(r,function(i){return t.map(i,n);});};};}function He(e){return function(t,n){return function(r){return e.chain(r,function(i){return e.map(n(i),function(s){var a;return Object.assign({},i,(a={},a[t]=s,a));});});};};}var Z=Xn,ae=Zn,tr=function(e,t){return d(e,sr(t));},nr=function(e,t){return d(e,or(t));},rr="Option",sr=function(e){return function(t){return fe(t)?Z:ae(e(t.value));};},ir=ae,or=function(e){return function(t){return fe(t)||fe(e)?Z:ae(t.value(e.value));};},ar=pe(2,function(e,t){return fe(e)?Z:t(e.value);}),ur={URI:rr,map:tr,ap:nr,chain:ar},fe=function(e){return e._tag==="None";},cr=function(e,t){return function(n){return fe(n)?e():t(n.value);};},Je=cr,lr=ir(Ge),Ot=He(ur),L=Vt,S=Rt,Lt=pe(2,function(e,t){return Q(e)?e:t(e.right);}),ze=function(e,t){return d(e,W(t));},Dt=function(e,t){return d(e,dr(t));},Ke="Either",W=function(e){return function(t){return Q(t)?t:S(e(t.right));};},hr={URI:Ke,map:ze},pr=S,fr=function(e){return function(t){return Q(t)?t:Q(e)?e:S(t.right(e.right));};},dr=fr,_r={URI:Ke,map:ze,ap:Dt},gr={URI:Ke,map:ze,ap:Dt,chain:Lt},br=function(e,t){return function(n){return Q(n)?L(e(n.left)):S(t(n.right));};},Q=Qn,Xe=function(e,t){return function(n){return Q(n)?e(n.left):t(n.right);};},mr=Xe,Y=Xe,vr=Y,Wt=function(e,t){try{return S(e());}catch(n){return L(t(n));}},yr=pr(Ge),wr=He(gr),qt=wr,Cr=Lt;function Sr(e){return jt(S,e.of);}function kr(e){return jt(L,e.of);}function Fr(e){return er(e,hr);}function $r(e){return Yn(e,_r);}function Er(e){return function(t,n){return e.chain(t,function(r){return Q(r)?e.of(r):n(r.right);});};}function Ar(e){return function(t,n,r){return e.map(t,br(n,r));};}function xr(e){return function(t,n){return function(r){return e.map(r,Y(t,n));};};}var Ze=function(e,t){return d(e,Tr(t));},Ut=function(e,t){return d(e,Ir(t));},Tr=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e);};};},Ir=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then(function(n){var r=n[0],i=n[1];return r(i);});};};},Qe=function(e){return function(){return Promise.resolve(e);};},Pr=pe(2,function(e,t){return function(){return Promise.resolve().then(e).then(function(n){return t(n)();});};}),Ye="Task",et={URI:Ye,map:Ze},Nt={of:Qe},Mr={URI:Ye,map:Ze,ap:Ut},Br={URI:Ye,map:Ze,of:Qe,ap:Ut,chain:Pr},jr=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s);});}return new(n||(n=Promise))(function(s,a){function u(h){try{c(r.next(h));}catch(f){a(f);}}function l(h){try{c(r.throw(h));}catch(f){a(f);}}function c(h){h.done?s(h.value):i(h.value).then(u,l);}c((r=r.apply(e,t||[])).next());});},Vr=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1];},trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this;}),a;function u(c){return function(h){return l([c,h]);};}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue;}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break;}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break;}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break;}s[2]&&n.ops.pop(),n.trys.pop();continue;}c=t.call(e,n);}catch(h){c=[6,h],i=0;}finally{r=s=0;}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0};}},tt=kr(Nt),N=Sr(Nt),Gt=Qe,nt=xr(et),Rr=nt,Ht=function(e,t){return function(){return jr(void 0,void 0,void 0,function(){var n;return Vr(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e().then(Rt)];case 1:return[2,r.sent()];case 2:return n=r.sent(),[2,Vt(t(n))];case 3:return[2];}});});};},Or=function(e,t){return d(e,rt(t));},Lr=function(e,t){return d(e,Wr(t));},rt=Fr(et),Dr=pe(3,Ar(et)),Wr=$r(Mr),st=pe(2,Er(Br)),qr=N,Ur="TaskEither",Nr={URI:Ur,map:Or,ap:Lr,chain:st},Gr=qr(Ge),Hr=He(Nr),Ce=Hr,Jr=st,it=st;function Jt(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`);}function zr(e){return e.replace(/_([a-z])/g,(t,n)=>`-${n.toLowerCase()}`);}function zt(e){return`tapps/${e}`;}function ot(e,t){sessionStorage.setItem(zt(e),JSON.stringify(t));}function Kt(e){const t=sessionStorage.getItem(zt(e));try{return t?JSON.parse(t):void 0;}catch{}}function at(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n();});}];}function Kr(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:i}=t,s=i===void 0?!0:i,a=typeof s=="boolean"?()=>s:s,u=(l,c,...h)=>{if(c||a()){const f="font-weight:bold;padding:0 5px;border-radius:100px",[b,w,C]={log:["#0089c3","white","INFO"],error:["#ff0000F0","white","ERR"],warn:["#D38E15","white","WARN"]}[l];console[l](`%c${C} ${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date())}%c %c${e}`,`${f};background-color:${b};color:${w}`,"",`${f};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...h);}};return[["log","forceLog"],["warn","forceWarn"],["error","forceError"]].reduce((l,[c,h])=>(l[c]=u.bind(void 0,c,!1),l[h]=u.bind(void 0,c,!0),l),{});}function Se(e){const t=n=>{throw n;};return typeof e=="function"?Ne.resolve(d(e,nt(t,n=>n))()):d(e,Y(t,n=>n));}function ue(e){return Object.assign((...t)=>Se(e(...t)),e);}const Xt=Object.assign((e,t)=>d(Ht(()=>new Ne((n,r,i)=>e(s=>n(S(s)),s=>n(L(s)),i),t),n=>n),it(Y(tt,N))),{fn:(e,t)=>Xt((n,r,i)=>{const s=e(i);d(typeof s=="function"?s:Gt(s),Rr(r,n))();},t)});var Xr=Object.defineProperty,Zr=(e,t,n)=>t in e?Xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ut=(e,t,n)=>Zr(e,typeof t!="symbol"?t+"":t,n);function Zt(e){return t=>t instanceof e;}function ee(e,t){const n=class extends Error{constructor(...s){const a=typeof t=="function"?t(...s):typeof t=="string"?[t]:t||[];super(...a),this.name=e;}};ut(n,"is",Zt(n));let r=n;return Object.defineProperty(r,"name",{value:e}),r;}function Qr(e,t,n){const r=class extends ee(e,n){constructor(...a){super(...a),ut(this,"data"),this.data=t(...a);}};ut(r,"is",Zt(r));let i=r;return Object.defineProperty(i,"name",{value:e}),i;}function Yr(e){const t=n=>{const r={};return new URLSearchParams(n).forEach((i,s)=>{const a=r[s];Array.isArray(a)?a.push(i):a===void 0?r[s]=i:r[s]=[a,i];}),he(e,r);};return J(we([m(),We(URLSearchParams)]),ye(n=>{try{return t(n),!0;}catch{return!1;}},"The value doesn't match required schema"),K(t));}function es(e){return J(m(),ye(t=>{try{return JSON.parse(t),!0;}catch{return!1;}},"Input is not a valid JSON value"),K(JSON.parse),e);}function te(e){return J(m(),es(e));}function Qt(e){return J(we([m(),We(URLSearchParams)]),Yr(e));}function ke(e){return t=>e.test(t);}const ts=ke(/^#[\da-f]{3}$/i),ns=ke(/^#[\da-f]{4}$/i),Fe=ke(/^#[\da-f]{6}$/i),rs=ke(/^#[\da-f]{8}$/i);function ss(e){return[Fe,rs,ts,ns].some(t=>t(e));}function Yt(e){let t="#";for(let n=0;n<e.length-1;n+=1)t+=e[1+n].repeat(2);return t;}function is(e){const t=e.replace(/\s/g,"").toLowerCase();if(/^#[\da-f]{3}$/i.test(t))return S(Yt(t.toLowerCase()+"f"));if(/^#[\da-f]{4}$/i.test(t))return S(Yt(t.toLowerCase()));if(/^#[\da-f]{6}$/i.test(t))return S(t.toLowerCase()+"ff");if(/^#[\da-f]{8}$/i.test(t))return S(t.toLowerCase());const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(\d{1,3})\)$/);return n?S(n.slice(1).reduce((r,i)=>r+parseInt(i,10).toString(16).padStart(2,"0"),"#").padEnd(9,"f")):L(new Error(`Value "${e}" does not satisfy any of known RGB formats.`));}function os(){return V({id:oe(),photo_url:k(m()),type:m(),title:m(),username:k(m())});}function en(){return V({added_to_attachment_menu:k(X()),allows_write_to_pm:k(X()),first_name:m(),id:oe(),is_bot:k(X()),is_premium:k(X()),last_name:k(m()),language_code:k(m()),photo_url:k(m()),username:k(m())});}function as(){return V({auth_date:J(m(),K(e=>new Date(Number(e)*1e3)),Et()),can_send_after:k(J(m(),K(Number),Ft())),chat:k(te(os())),chat_type:k(m()),chat_instance:k(m()),hash:m(),query_id:k(m()),receiver:k(te(en())),start_param:k(m()),signature:m(),user:k(te(en()))});}function us(){return Qt(as());}function ct(){return At(m(),J(we([m(),oe()]),K(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),ye(ss)));}function cs(){const e=k(J(m(),K(t=>t==="1")));return V({tgWebAppBotInline:e,tgWebAppData:k(us()),tgWebAppDefaultColors:k(te(ct())),tgWebAppFullscreen:e,tgWebAppPlatform:m(),tgWebAppShowSettings:e,tgWebAppStartParam:k(m()),tgWebAppThemeParams:te(ct()),tgWebAppVersion:m()});}function ls(){return Qt(cs());}function tn(){return V({eventType:m(),eventData:k(qe())});}function lt(e){return Wt(()=>he(ls(),e),t=>t);}const hs=ue(lt);function nn(e,t){return t||(t=(n,r)=>JSON.stringify(r)),new URLSearchParams(Object.entries(e).reduce((n,[r,i])=>(Array.isArray(i)?n.push(...i.map(s=>[r,String(s)])):i!=null&&n.push([r,i instanceof Date?(i.getTime()/1e3|0).toString():typeof i=="string"||typeof i=="number"?String(i):typeof i=="boolean"?i?"1":"0":t(r,i)]),n),[])).toString();}function ps(e){return nn(e);}function fs(e){return nn(e,(t,n)=>t==="tgWebAppData"?ps(n):JSON.stringify(n));}function ds(e){return{all:e=e||new Map(),on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n]);},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]));},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n);}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n);});}};}function rn(e){return $t(V({TelegramWebviewProxy:V({postEvent:De()})}),e);}function sn(){try{return window.self!==window.top;}catch{return!0;}}class _s extends Qr("LaunchParamsRetrieveError",t=>({errors:t}),t=>[["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","ðŸ“– Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/tma-js-bridge/environment","","Collected errors:",...t.map(({source:n,error:r})=>`Source: ${n} / ${r instanceof Error?r.message:String(r)}`)].join(`
`)]){}let gs=class extends ee("InvalidLaunchParamsError",(t,n)=>[`Invalid value for launch params: ${t}`,{cause:n}]){};class on extends ee("UnknownEnvError"){}const an="launchParams";function un(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&");}function de(){return d(ht(),Cr(lt));}const bs=ue(de);function cn(){return d(ht(),W(e=>{const t=new URLSearchParams(e).get("tgWebAppData");return t?ae(t):Z;}));}function ms(){return d(cn(),vr(e=>{throw e;},e=>e),Je(()=>{},e=>e));}function ht(){const e=[];for(const[t,n]of[[()=>un(window.location.href),"window.location.href"],[()=>{const r=performance.getEntriesByType("navigation")[0];return r&&un(r.name);},"performance navigation entries"],[()=>Kt(an),"local storage"]]){const r=t();if(!r){e.push({source:n,error:new Error("Source is empty")});continue;}const i=d(lt(r),mr(s=>s,()=>!0));if(typeof i!="boolean"){e.push({source:n,error:i});continue;}return ot(an,r),S(r);}return L(new _s(e));}function vs(e,t){const n=new Map(),r=ds(),i=(s,a,u=!1)=>{const l=n.get(s)||new Map();n.set(s,l);const c=l.get(a)||[];l.set(a,c);const h=c.findIndex(f=>f[1]===u);if(h>=0&&(r.off(s,c[h][0]),c.splice(h,1),!c.length&&(l.delete(a),!l.size))){const f=n.size;n.delete(s),f&&!n.size&&t();}};return{on(s,a,u){!n.size&&e();const l=()=>{i(s,a,u);},c=(...b)=>{u&&l(),s==="*"?a({name:b[0],payload:b[1]}):a(...b);};r.on(s,c);const h=n.get(s)||new Map();n.set(s,h);const f=h.get(a)||[];return h.set(a,f),f.push([c,u||!1]),l;},off:i,emit:r.emit,clear(){const s=n.size;r.all.clear(),n.clear(),s&&t();}};}function $e(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}));}const ys=j(!1),ws=j("https://web.telegram.org"),Cs=y(ys),Ss=y(ws),Ee=j((...e)=>{window.parent.postMessage(...e);}),_e=j(Kr("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog:Cs}));function pt(e,t,n){const r=[n],i=e[t];typeof i=="function"&&r.push(i);const s=(...u)=>{r.forEach(l=>l(...u));},a=Object.assign((...u)=>{s(...u);},{unwrap(){const{length:u}=r;if(u===1){delete e[t];return;}if(u===2){pn(e,t,r[1]);return;}r.unshift(1),pn(e,t,s);}});hn(e,t,()=>a,u=>r.push(u));}function ln(e,t){const n=e[t];hn(e,t,()=>n,r=>{Object.entries(r).forEach(([i,s])=>{n[i]=s;});});}function hn(e,t,n,r){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:n,set:r});}function pn(e,t,n){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n});}const ks={clipboard_text_received:V({req_id:m(),data:ie(m())}),custom_method_invoked:V({req_id:m(),result:k(qe()),error:k(m())}),popup_closed:ie(V({button_id:ie(m(),()=>{})}),{}),viewport_changed:ie(V({height:oe(),width:ie(oe(),()=>window.innerWidth),is_state_stable:X(),is_expanded:X()}),()=>({height:window.innerHeight,is_state_stable:!0,is_expanded:!0})),theme_changed:V({theme_params:ct()})};function fn(e){if(e.source!==window.parent)return;let t;try{t=he(te(tn()),e.data);}catch{return;}const{eventType:n,eventData:r}=t,i=ks[n];let s;try{s=i?he(i,r):r;}catch(a){return _e().forceError([`An error occurred processing the "${n}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/tma.js/issues/new/choose"].join(`
`),t,a);}Fs(n,s);}const{on:ne,off:Ae,emit:Fs}=vs(()=>{const e=window;!e.TelegramGameProxy&&(e.TelegramGameProxy={}),pt(e.TelegramGameProxy,"receiveEvent",$e),ln(e,"TelegramGameProxy"),!e.Telegram&&(e.Telegram={}),!e.Telegram.WebView&&(e.Telegram.WebView={}),pt(e.Telegram.WebView,"receiveEvent",$e),ln(e.Telegram,"WebView"),pt(e,"TelegramGameProxy_receiveEvent",$e),window.addEventListener("message",fn);},()=>{[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(e=>{const t=window;let n=[void 0,t];for(const s of e)if(n=[n[1],n[1][s]],!n[1])return;const[r,i]=n;"unwrap"in i&&(i.unwrap(),r&&r!==t&&!Object.keys(r).length&&delete t[e[0]]);}),window.removeEventListener("message",fn);}),$s=(...e)=>Ee()(...e);function dn(e,t){_e().log("Posting event:",t?{eventType:e,eventData:t}:{eventType:e});const n=window,r=JSON.stringify({eventType:e,eventData:t});return sn()?($s(r,Ss()),S(void 0)):rn(n)?(n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t)),S(void 0)):$t(V({external:V({notify:De()})}),n)?(n.external.notify(r),S(void 0)):L(new on());}function _n(e,t,n={}){const{capture:r=()=>!0,postEvent:i=dn}=n,s=j(),[a,u]=at();(Array.isArray(t)?t:[t]).forEach(c=>{a(ne(c,h=>{const f=Array.isArray(t);r(f?{event:c,payload:h}:h)&&s.set([f?{event:c,payload:h}:h]);}));});const l=c=>(u(),c);return d(async()=>i(e,n.params),it(()=>Xt((c,h,f)=>{const b=s();if(b)return c(b[0]);const w=$=>{$&&c($[0]);},C=()=>{s.unsub(w);};s.sub(w),f.on("finalized",C);},n)),Dr(l,l));}function Es(e,t){const n=gn(e,t);return typeof n=="function"?Ne.fn(()=>Se(n)):n;}function gn(e,t){const n=rn(window);if(!e)return n||d(ht(),Y(()=>!1,()=>!0));if(n)return N(!0);const{timeout:r=100}=t||{};return d(_n("web_app_request_theme","theme_changed",{...t,timeout:r}),nt(i=>Mt.is(i)||on.is(i)?S(!1):L(i),()=>S(!0)));}function As({launchParams:e,onEvent:t,resetPostMessage:n}={}){if(e){const s=typeof e=="string"||e instanceof URLSearchParams?e.toString():fs({...e,tgWebAppData:void 0})+(e.tgWebAppData?`&tgWebAppData=${encodeURIComponent(e.tgWebAppData.toString())}`:"");try{hs(s);}catch(a){throw new gs(s,a);}ot("launchParams",s);}if(sn()){if(!t)return;n&&Ee.reset();const s=Ee();Ee.set((...a)=>{const[u]=a,l=()=>{s(...a);};try{const c=he(te(tn()),u);t({name:c.eventType,params:c.eventData},l);}catch{l();}});return;}const r=window.TelegramWebviewProxy||{},i=r.postEvent||(()=>{});window.TelegramWebviewProxy={...r,postEvent(s,a){const u=()=>{i(s,a);};t?t({name:s,params:a?JSON.parse(a):void 0},u):u();}},_e().log("Environment was mocked by the mockTelegramEnv function");}const bn={"6.0":["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"],6.1:["web_app_open_tg_link","web_app_open_invoice","web_app_setup_back_button","web_app_set_background_color","web_app_set_header_color","web_app_trigger_haptic_feedback"],6.2:["web_app_open_popup"],6.4:["web_app_close_scan_qr_popup","web_app_open_scan_qr_popup","web_app_read_text_from_clipboard",{method:"web_app_open_link",param:"try_instant_view"}],6.7:["web_app_switch_inline_query"],6.9:["web_app_invoke_custom_method","web_app_request_write_access","web_app_request_phone",{method:"web_app_set_header_color",param:"color"}],"6.10":["web_app_setup_settings_button"],7.2:["web_app_biometry_get_info","web_app_biometry_open_settings","web_app_biometry_request_access","web_app_biometry_request_auth","web_app_biometry_update_token"],7.6:[{method:"web_app_open_link",param:"try_browser"},{method:"web_app_close",param:"return_back"}],7.7:["web_app_setup_swipe_behavior"],7.8:["web_app_share_to_story"],"7.10":["web_app_setup_secondary_button","web_app_set_bottom_bar_color",{method:"web_app_setup_main_button",param:"has_shine_effect"}],"8.0":["web_app_request_safe_area","web_app_request_content_safe_area","web_app_request_fullscreen","web_app_exit_fullscreen","web_app_set_emoji_status","web_app_add_to_home_screen","web_app_check_home_screen","web_app_request_emoji_status_access","web_app_check_location","web_app_open_location_settings","web_app_request_file_download","web_app_request_location","web_app_send_prepared_message","web_app_start_accelerometer","web_app_start_device_orientation","web_app_start_gyroscope","web_app_stop_accelerometer","web_app_stop_device_orientation","web_app_stop_gyroscope","web_app_toggle_orientation_lock"],"9.0":["web_app_device_storage_clear","web_app_device_storage_get_key","web_app_device_storage_save_key","web_app_secure_storage_clear","web_app_secure_storage_get_key","web_app_secure_storage_restore_key","web_app_secure_storage_save_key"],9.1:["web_app_hide_keyboard"]};function mn(e,t){return Object.keys(bn).find(n=>bn[n].some(r=>t?typeof r=="object"&&r.method===e&&r.param===t:r===e))||null;}function vn(e){return e.split(".").map(Number);}function xs(e,t){const n=vn(e),r=vn(t),i=Math.max(n.length,r.length);for(let s=0;s<i;s+=1){const a=n[s]||0,u=r[s]||0;if(a!==u)return a>u?1:-1;}return 0;}function ge(e,t,n){const r=n?mn(e,t):mn(e);return r?xs(r,n||t)<=0:!1;}var Ts=Object.defineProperty,Is=(e,t,n)=>t in e?Ts(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o=(e,t,n)=>Is(e,typeof t!="symbol"?t+"":t,n);function q(e){return typeof e=="function"?e():e;}class ft{constructor({onMounted:t,restoreState:n,initialState:r,onUnmounted:i,isPageReload:s}){o(this,"_isMounted",j(!1)),o(this,"isMounted",y(this._isMounted)),o(this,"mount"),o(this,"unmount"),this.mount=()=>{if(this.isMounted())return S(void 0);const a=q(s)?n():void 0,u=a?S(a):typeof r=="function"?r():S(r);return d(u,W(l=>{ve(()=>{this._isMounted.set(!0),t?.(l);});}));},this.unmount=()=>{this._isMounted()&&ve(()=>{this._isMounted.set(!1),i?.();});};}}function dt(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=r);}return t;}function _t(e,t){const n=Object.keys(e),r=Object.keys(t);return n.length!==r.length?!1:n.every(i=>Object.prototype.hasOwnProperty.call(t,i)&&e[i]===t[i]);}class xe{constructor({initialState:t,onChange:n}){o(this,"_state"),o(this,"state"),o(this,"setState",r=>{const i={...this.state(),...dt(r)};_t(i,this.state())||this._state.set(i);}),this._state=j(t,{equals:_t}),this.state=y(this._state),this.state.sub(n);}getter(t){return y(()=>this._state()[t]);}hasDiff(t){return!_t({...this.state(),...dt(t)},this.state());}}function yn(e,t){return y(()=>ge(e,q(t)));}function x(e){return Object.assign(ue(e),{ifAvailable(...t){return d(e.ifAvailable(...t),Je(()=>({ok:!1}),n=>({ok:!0,data:Se(n)})));}});}function wn(e){return[e];}class gt extends ee("CSSVarsBoundError","CSS variables are already bound"){}class Ps extends ee("FunctionNotAvailableError",wn){}class Ms extends ee("FullscreenFailedError",wn){}class Bs extends ee("UnknownThemeParamsKeyError",t=>[`Unknown theme params key passed: ${t}`]){}function Te(e,t){const n=y(()=>q(t.version)||"100"),r=y(()=>q(t.isTma)),{requires:i,returns:s}=t,a=i?typeof i=="object"?i:{every:[i]}:void 0,u=_=>{if(!t.supports)return!0;const g=t.supports[_];return ge(g.method,g.param,n());},l=()=>{if(!a)return;const[_,g]="every"in a?["every",a.every]:["some",a.some];for(let p=0;p<g.length;p++){const T=g[p],I=typeof T=="function"?T():ge(T,n())?void 0:`it is unsupported in Mini Apps version ${n()}`;if(I&&(_==="every"||p===g.length-1))return I;}},c=(..._)=>{for(const g in t.supports)if(t.supports[g].shouldCheck(..._)&&!u(g))return`option ${g} is not supported in Mini Apps version ${n()}`;},h=y(()=>!l()),f=y(()=>n()!=="0.0"),b=y(()=>t.isMounted?t.isMounted():!0),w=y(()=>r()&&f()&&h()&&b()),C=_=>{const g=new Ps(_);return["task","promise"].includes(t.returns)?tt(g):L(g);},$=(..._)=>s==="plain"?Wt(()=>e(..._),g=>g):s==="promise"?Ht(()=>e(..._),g=>g):e(..._);return Object.assign((..._)=>{var g;const p="Unable to call function:";if(!r())return C(`${p} it can't be called outside Mini Apps`);if(!f())return C(`${p} the SDK was not initialized. Use the SDK init() function`);const T=l();if(T)return C(`${p} ${T}`);const I=c(..._);if(I)return C(`${p} ${I}`);if(!b()){const P=(g=t.isMounting)!=null&&g.call(t)?"mounting. Wait for the mount completion":"unmounted. Use the mount() method";return C(`${p} the component is ${P}`);}return $(..._);},e,{isAvailable:w,ifAvailable(..._){return w()?ae($(..._)):Z;}},a?{isSupported:h}:{},t.supports?{supports:u}:{});}function G(e){return t=>Te(t,e);}class Cn{constructor({isTma:t,storage:n,onClick:r,offClick:i,initialState:s,isPageReload:a,postEvent:u,payload:l,method:c,version:h}){o(this,"isMounted"),o(this,"isSupported"),o(this,"state"),o(this,"stateSetters"),o(this,"stateBoolSetters"),o(this,"setStateFp"),o(this,"setState"),o(this,"onClickFp"),o(this,"onClick"),o(this,"offClickFp"),o(this,"offClick"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const f=new xe({initialState:s,onChange(_){n.set(_);}}),b=new ft({initialState:s,isPageReload:a,onMounted:f.setState,restoreState:n.get}),w={version:h,requires:c,isTma:t},C=G({...w,returns:"plain"}),$=G({...w,returns:"either",isMounted:b.isMounted});this.isMounted=b.isMounted,this.isSupported=yn(c,h),this.state=f.state,this.setStateFp=$(_=>{const g={...this.state(),...dt(_)};return f.hasDiff(g)?d(u(c,l(g)),W(()=>{f.setState(g);})):S(void 0);}),this.setState=x(this.setStateFp),this.onClickFp=C(r),this.onClick=x(this.onClickFp),this.offClickFp=C(i),this.offClick=x(this.offClickFp),this.mountFp=C(()=>{const _=()=>{};return d(b.mount(),Y(_,_));}),this.mount=x(this.mountFp),this.unmount=b.unmount,this.stateSetters=_=>{const g=$(p=>this.setStateFp({[_]:p}));return[x(g),g];},this.stateBoolSetters=_=>{const[,g]=this.stateSetters(_),p=$(()=>g(!1)),T=$(()=>g(!0));return[[x(p),p],[x(T),T]];};}stateGetter(t){return y(()=>this.state()[t]);}}class js{constructor(t){o(this,"isVisible"),o(this,"isMounted"),o(this,"isSupported"),o(this,"hideFp"),o(this,"hide"),o(this,"showFp"),o(this,"show"),o(this,"onClickFp"),o(this,"onClick"),o(this,"offClickFp"),o(this,"offClick"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const n=new Cn({...t,method:"web_app_setup_back_button",payload:r=>({is_visible:r.isVisible}),initialState:{isVisible:!1}});this.isVisible=n.stateGetter("isVisible"),this.isMounted=n.isMounted,this.isSupported=n.isSupported,[[this.hide,this.hideFp],[this.show,this.showFp]]=n.stateBoolSetters("isVisible"),this.onClick=n.onClick,this.onClickFp=n.onClickFp,this.offClick=n.offClick,this.offClickFp=n.offClickFp,this.mount=n.mount,this.mountFp=n.mountFp,this.unmount=n.unmount;}}function be(){return{isTma:y(()=>gn())};}function Ie(e){return t=>({...t,...q(e)});}function Pe(e,t){return j(e,t);}const Sn=Pe(dn),Me=(...e)=>Sn()(...e),Vs=(...e)=>Se(Me(...e)),Be=Ie({postEvent:Me});function Rs(e){return{get:()=>Kt(e),set(t){ot(e,t);}};}function Os(){return performance.getEntriesByType("navigation")[0];}function Ls(){const e=Os();return!!e&&e.type==="reload";}function je(e){return Ie({storage:Rs(e),isPageReload:Ls});}const bt=Pe("0.0"),Ve=Ie({version:bt});function kn(e,t){return{...d(be(),Be,Ve,je(e)),onClick(n,r){return ne(t,n,r);},offClick(n,r){Ae(t,n,r);}};}const Ds=new js(kn("backButton","back_button_pressed"));class Ws{constructor({initialState:t,onMounted:n,restoreState:r,onUnmounted:i,isPageReload:s}){o(this,"_isMounted",j(!1)),o(this,"isMounted",y(this._isMounted)),o(this,"mount"),o(this,"unmount"),this.mount=a=>{if(this._isMounted())return N(void 0);const u=q(s)?r():void 0;return d(u?N(u):t(a),rt(l=>{this._isMounted()||ve(()=>{this._isMounted.set(!0),n?.(l);});}));},this.unmount=()=>{this._isMounted()&&ve(()=>{this._isMounted.set(!1),i?.();});};}}const qs=(e,t,n)=>_n(e,t,{postEvent:Me,...n}),Us=Ie({request:qs});class Ns{constructor({postEvent:t,isTma:n,version:r}){o(this,"isSupported"),o(this,"impactOccurredFp"),o(this,"impactOccurred"),o(this,"notificationOccurredFp"),o(this,"notificationOccurred"),o(this,"selectionChangedFp"),o(this,"selectionChanged");const i="web_app_trigger_haptic_feedback",s=G({requires:i,isTma:n,version:r,returns:"plain"});this.isSupported=yn(i,r),this.impactOccurredFp=s(a=>t(i,{type:"impact",impact_style:a})),this.notificationOccurredFp=s(a=>t(i,{type:"notification",notification_type:a})),this.selectionChangedFp=s(()=>t(i,{type:"selection_change"})),this.impactOccurred=x(this.impactOccurredFp),this.notificationOccurred=x(this.notificationOccurredFp),this.selectionChanged=x(this.selectionChangedFp);}}function Gs(){return new Ns(d(be(),Be,Ve));}const Hs=Gs();class Js{constructor({retrieveInitData:t}){o(this,"_state",j()),o(this,"_raw",j()),o(this,"state",y(this._state)),o(this,"authDate",this.fromState("auth_date")),o(this,"canSendAfter",this.fromState("can_send_after")),o(this,"canSendAfterDate",y(()=>{const n=this.authDate(),r=this.canSendAfter();return r&&n?new Date(n.getTime()+r*1e3):void 0;})),o(this,"chat",this.fromState("chat")),o(this,"chatType",this.fromState("chat_type")),o(this,"chatInstance",this.fromState("chat_instance")),o(this,"hash",this.fromState("hash")),o(this,"queryId",this.fromState("query_id")),o(this,"raw",y(this._raw)),o(this,"receiver",this.fromState("receiver")),o(this,"signature",this.fromState("signature")),o(this,"startParam",this.fromState("start_param")),o(this,"user",this.fromState("user")),o(this,"restoreFp"),o(this,"restore"),this.restoreFp=()=>d(t(),W(Je(()=>{},({raw:n,obj:r})=>{this._state.set(r),this._raw.set(n);}))),this.restore=ue(this.restoreFp);}fromState(t){return y(()=>{const n=this._state();return n?n[t]:void 0;});}}function zs(){return new Js({retrieveInitData(){return d(yr,qt("obj",()=>d(de(),W(({tgWebAppData:e})=>e?ae(e):Z))),qt("raw",cn),W(({obj:e,raw:t})=>d(lr,Ot("obj",()=>e),Ot("raw",()=>t))));}});}const Ks=zs();class Xs{constructor({defaults:t,...n}){o(this,"bgColor"),o(this,"hasShineEffect"),o(this,"isEnabled"),o(this,"isLoaderVisible"),o(this,"isVisible"),o(this,"isMounted"),o(this,"state"),o(this,"text"),o(this,"textColor"),o(this,"showFp"),o(this,"show"),o(this,"hideFp"),o(this,"hide"),o(this,"enableFp"),o(this,"enable"),o(this,"enableShineEffectFp"),o(this,"enableShineEffect"),o(this,"disableFp"),o(this,"disable"),o(this,"disableShineEffectFp"),o(this,"disableShineEffect"),o(this,"setBgColorFp"),o(this,"setBgColor"),o(this,"setTextColorFp"),o(this,"setTextColor"),o(this,"setTextFp"),o(this,"setText"),o(this,"showLoaderFp"),o(this,"showLoader"),o(this,"hideLoaderFp"),o(this,"hideLoader"),o(this,"setParamsFp"),o(this,"setParams"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount"),o(this,"onClickFp"),o(this,"onClick"),o(this,"offClickFp"),o(this,"offClick");const r=new Cn({...n,version:"100",initialState:{hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"},method:"web_app_setup_main_button",payload:s=>({has_shine_effect:s.hasShineEffect,is_visible:s.isVisible,is_active:s.isEnabled,is_progress_visible:s.isLoaderVisible,text:s.text,color:s.bgColor,text_color:s.textColor})}),i=(s,a)=>{const u=r.stateGetter(s);return y(()=>u()||q(a));};this.bgColor=i("bgColor",t.bgColor),this.textColor=i("textColor",t.textColor),this.hasShineEffect=r.stateGetter("hasShineEffect"),this.isEnabled=r.stateGetter("isEnabled"),this.isLoaderVisible=r.stateGetter("isLoaderVisible"),this.text=r.stateGetter("text"),this.isVisible=r.stateGetter("isVisible"),this.isMounted=r.isMounted,this.state=r.state,[this.setBgColor,this.setBgColorFp]=r.stateSetters("bgColor"),[this.setTextColor,this.setTextColorFp]=r.stateSetters("textColor"),[[this.disableShineEffect,this.disableShineEffectFp],[this.enableShineEffect,this.enableShineEffectFp]]=r.stateBoolSetters("hasShineEffect"),[[this.disable,this.disableFp],[this.enable,this.enableFp]]=r.stateBoolSetters("isEnabled"),[[this.hideLoader,this.hideLoaderFp],[this.showLoader,this.showLoaderFp]]=r.stateBoolSetters("isLoaderVisible"),[this.setText,this.setTextFp]=r.stateSetters("text"),[[this.hide,this.hideFp],[this.show,this.showFp]]=r.stateBoolSetters("isVisible"),this.setParams=r.setState,this.setParamsFp=r.setStateFp,this.onClick=r.onClick,this.onClickFp=r.onClickFp,this.offClick=r.offClick,this.offClickFp=r.offClickFp,this.mount=r.mount,this.mountFp=r.mountFp,this.unmount=r.unmount;}}function mt(e,t){document.documentElement.style.setProperty(e,t);}function vt(e){document.documentElement.style.removeProperty(e);}function Zs(e){return d(is(e),W(t=>Math.sqrt([.299,.587,.114].reduce((n,r,i)=>{const s=parseInt(t.slice(1+i*2,1+(i+1)*2),16);return n+s*s*r;},0))<120));}const Fn=ue(Zs);class Qs{constructor({initialState:t,onChange:n,offChange:r,isTma:i,storage:s,isPageReload:a}){o(this,"accentTextColor"),o(this,"bgColor"),o(this,"buttonColor"),o(this,"buttonTextColor"),o(this,"bottomBarBgColor"),o(this,"destructiveTextColor"),o(this,"headerBgColor"),o(this,"hintColor"),o(this,"linkColor"),o(this,"secondaryBgColor"),o(this,"sectionBgColor"),o(this,"sectionHeaderTextColor"),o(this,"sectionSeparatorColor"),o(this,"subtitleTextColor"),o(this,"textColor"),o(this,"_isCssVarsBound",j(!1)),o(this,"isCssVarsBound",y(this._isCssVarsBound)),o(this,"bindCssVarsFp"),o(this,"bindCssVars"),o(this,"state"),o(this,"isDark",y(()=>{const w=this.bgColor();return!w||Fn(w);})),o(this,"isMounted"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount");const u=new xe({initialState:{},onChange:s.set}),l=w=>{u.setState(w.theme_params);},c=new ft({initialState:()=>S(q(t)),isPageReload:a,onMounted(w){u.setState(w),n(l);},onUnmounted(){r(l);},restoreState:s.get}),h={isTma:i,returns:"either"},f=G(h),b=G({...h,isMounted:c.isMounted});this.accentTextColor=u.getter("accent_text_color"),this.bgColor=u.getter("bg_color"),this.buttonColor=u.getter("button_color"),this.buttonTextColor=u.getter("button_text_color"),this.bottomBarBgColor=u.getter("bottom_bar_bg_color"),this.destructiveTextColor=u.getter("destructive_text_color"),this.headerBgColor=u.getter("header_bg_color"),this.hintColor=u.getter("hint_color"),this.linkColor=u.getter("link_color"),this.secondaryBgColor=u.getter("secondary_bg_color"),this.sectionBgColor=u.getter("section_bg_color"),this.sectionHeaderTextColor=u.getter("section_header_text_color"),this.sectionSeparatorColor=u.getter("section_separator_color"),this.subtitleTextColor=u.getter("subtitle_text_color"),this.textColor=u.getter("text_color"),this.state=u.state,this.isMounted=c.isMounted,this.bindCssVarsFp=b(w=>{if(this._isCssVarsBound())return L(new gt());w||(w=_=>`--tg-theme-${zr(_)}`);const C=_=>{Object.entries(u.state()).forEach(([g,p])=>{p&&_(g,p);});},$=()=>{C((_,g)=>{mt(w(_),g);});};return $(),u.state.sub($),this._isCssVarsBound.set(!0),S(()=>{C(vt),u.state.unsub($),this._isCssVarsBound.set(!1);});}),this.mountFp=f(c.mount),this.unmount=c.unmount,this.bindCssVars=x(this.bindCssVarsFp),this.mount=x(this.mountFp);}}const yt=Pe({});function Ys(){return new Qs({...d(be(),je("themeParams")),offChange(e){Ae("theme_changed",e);},onChange(e){ne("theme_changed",e);},initialState:yt});}const wt=Ys();function ei(e,t,n){return d(kn(e,t),r=>({...r,defaults:n}));}const ti=new Xs(ei("mainButton","main_button_pressed",{bgColor:y(()=>wt.buttonColor()||"#2481cc"),textColor:y(()=>wt.buttonTextColor()||"#ffffff")}));class ni{constructor({storage:t,isPageReload:n,version:r,postEvent:i,isTma:s,theme:a,onVisibilityChanged:u,offVisibilityChanged:l}){o(this,"isSupported"),o(this,"isDark",y(()=>{const p=this.bgColorRgb();return p?Fn(p):!1;})),o(this,"isActive"),o(this,"state"),o(this,"isCssVarsBound"),o(this,"bindCssVarsFp"),o(this,"bindCssVars"),o(this,"isMounted"),o(this,"mountFp"),o(this,"mount"),o(this,"unmount"),o(this,"bgColor"),o(this,"bgColorRgb"),o(this,"setBgColorFp"),o(this,"setBgColor"),o(this,"headerColor"),o(this,"headerColorRgb"),o(this,"setHeaderColorFp"),o(this,"setHeaderColor"),o(this,"bottomBarColor"),o(this,"bottomBarColorRgb"),o(this,"setBottomBarColorFp"),o(this,"setBottomBarColor"),o(this,"closeFp"),o(this,"close"),o(this,"readyFp"),o(this,"ready");const c=p=>{b.setState({isActive:p.is_visible});},h=p=>{[[this.headerColor,"web_app_set_header_color"],[this.bgColor,"web_app_set_background_color"],[this.bottomBarColor,"web_app_set_bottom_bar_color"]].forEach(([T,I])=>{const P=T();if(!Fe(P)&&(I!=="web_app_set_header_color"||!["bg_color","secondary_bg_color"].includes(P))){const v=p[P];v&&i(I,{color:v});}});},f=new ft({initialState(){return S({bgColor:"bg_color",headerColor:"header_bg_color",bottomBarColor:"bottom_bar_bg_color",isActive:!0});},isPageReload:n,onMounted:p=>{u(c),a.sub(h),b.setState(p);},onUnmounted(){l(c),a.unsub(h);},restoreState:t.get});this.isMounted=f.isMounted,this.mountFp=Te(()=>{const p=()=>{};return d(f.mount(),Y(p,p));},{isTma:s,returns:"plain"}),this.mount=x(this.mountFp),this.unmount=f.unmount;const b=new xe({initialState:{bgColor:"bg_color",bottomBarColor:"bottom_bar_bg_color",headerColor:"bg_color",isActive:!1},onChange:t.set});this.state=b.state;const w=p=>Fe(p)?p:q(a)[p],C=p=>y(()=>w(p()));this.isActive=b.getter("isActive"),this.isSupported=y(()=>["web_app_set_header_color","web_app_set_background_color","web_app_set_bottom_bar_color"].some(p=>ge(p,q(r))));const $=j(!1);this.isCssVarsBound=y($),this.bindCssVarsFp=Te(p=>{if($())return L(new gt());const[T,I]=at(()=>{$.set(!1);}),P=(v,A)=>{const E=()=>{mt(v,A()||null);};E(),T(A.sub(E),vt.bind(null,v));};return p||(p=v=>`--tg-${Jt(v)}`),P(p("bgColor"),this.bgColorRgb),P(p("bottomBarColor"),this.bottomBarColorRgb),P(p("headerColor"),this.headerColorRgb),$.set(!0),S(I);},{isTma:s,returns:"either",isMounted:this.isMounted}),this.bindCssVars=x(this.bindCssVarsFp);const _=p=>{const T=b.getter(p),I=C(T),P={headerColor:"web_app_set_header_color",bgColor:"web_app_set_background_color",bottomBarColor:"web_app_set_bottom_bar_color"}[p],v=Te(A=>{if(A===T())return S(void 0);if(P==="web_app_set_header_color"&&(A==="bg_color"||A==="secondary_bg_color"))return d(i("web_app_set_header_color",{color_key:A}),W(()=>{b.setState({[p]:A});}));const E=w(A);return d(E?i(P,{color:E}):L(new Bs(A)),W(()=>{b.setState({[p]:A});}));},{isTma:s,version:r,requires:P,isMounted:this.isMounted,returns:"either",supports:p==="headerColor"?{rgb:{method:"web_app_set_header_color",param:"color",shouldCheck:Fe}}:void 0});return[T,I,x(v),v];};[this.bgColor,this.bgColorRgb,this.setBgColor,this.setBgColorFp]=_("bgColor"),[this.headerColor,this.headerColorRgb,this.setHeaderColor,this.setHeaderColorFp]=_("headerColor"),[this.bottomBarColor,this.bottomBarColorRgb,this.setBottomBarColor,this.setBottomBarColorFp]=_("bottomBarColor");const g=G({isTma:s,returns:"either"});this.closeFp=g(p=>i("web_app_close",{return_back:p})),this.close=x(this.closeFp),this.readyFp=g(()=>i("web_app_ready")),this.ready=x(this.readyFp);}}function ri(){return new ni({...d(be(),Be,Ve,je("miniApp")),offVisibilityChanged(e){Ae("visibility_changed",e);},onVisibilityChanged(e){ne("visibility_changed",e);},theme:wt.state});}const si=ri(),$n=Pe(!1);class ii{constructor({storage:t,isPageReload:n,onContentSafeAreaInsetsChanged:r,onSafeAreaInsetsChanged:i,onViewportChanged:s,onFullscreenChanged:a,offContentSafeAreaInsetsChanged:u,offFullscreenChanged:l,offSafeAreaInsetsChanged:c,offViewportChanged:h,request:f,isViewportStable:b,isFullscreen:w,isTma:C,version:$,postEvent:_}){o(this,"state"),o(this,"height"),o(this,"stableHeight"),o(this,"width"),o(this,"isExpanded"),o(this,"isStable",y(()=>this.height()===this.stableHeight())),o(this,"contentSafeAreaInsets"),o(this,"contentSafeAreaInsetTop"),o(this,"contentSafeAreaInsetLeft"),o(this,"contentSafeAreaInsetRight"),o(this,"contentSafeAreaInsetBottom"),o(this,"safeAreaInsets"),o(this,"safeAreaInsetTop"),o(this,"safeAreaInsetLeft"),o(this,"safeAreaInsetRight"),o(this,"safeAreaInsetBottom"),o(this,"isFullscreen"),o(this,"requestFullscreenFp"),o(this,"requestFullscreen"),o(this,"exitFullscreenFp"),o(this,"exitFullscreen"),o(this,"isCssVarsBound"),o(this,"bindCssVarsFp"),o(this,"bindCssVars"),o(this,"isMounted"),o(this,"mountFp"),o(this,"mount"),o(this,"expandFp"),o(this,"expand");const g={top:0,right:0,left:0,bottom:0},p=new xe({initialState:{contentSafeAreaInsets:g,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:g,stableHeight:0,width:0},onChange:t.set}),T=F=>{p.setState({isExpanded:F.is_expanded,height:F.height,width:F.width,stableHeight:F.is_state_stable?F.height:void 0});},I=F=>{p.setState({isFullscreen:F.is_fullscreen});},P=F=>{p.setState({safeAreaInsets:F});},v=F=>{p.setState({contentSafeAreaInsets:F});},A=new Ws({initialState(F){const re=H=>()=>{const[z,U]=H==="safe-area"?["web_app_request_safe_area","safe_area_changed"]:["web_app_request_content_safe_area","content_safe_area_changed"];return ge(z,q($))?f(z,U,F):N({top:0,left:0,right:0,bottom:0});},B=H=>()=>typeof H=="boolean"?N(H):Gt(H());return d(Gr,Ce("safeAreaInsets",re("safe-area")),Ce("contentSafeAreaInsets",re("content-safe-area")),Ce("isFullscreen",B(w)),Ce("isViewportStable",B(b)),it(({isViewportStable:H,...z})=>H?N({...z,height:window.innerHeight,isExpanded:!0,stableHeight:window.innerHeight,width:window.innerWidth}):d(f("web_app_request_viewport","viewport_changed",F),rt(U=>({...z,height:U.height,isExpanded:U.is_expanded,stableHeight:U.is_state_stable?U.height:0,width:U.width})))));},isPageReload:n,onMounted(F){s(T),a(I),i(P),r(v),p.setState(F);},onUnmounted(){h(T),l(I),c(P),u(v);},restoreState:t.get}),E=F=>y(()=>this.safeAreaInsets()[F]),M=F=>y(()=>this.contentSafeAreaInsets()[F]);this.state=p.state,this.height=p.getter("height"),this.stableHeight=p.getter("stableHeight"),this.width=p.getter("width"),this.isExpanded=p.getter("isExpanded"),this.safeAreaInsets=p.getter("safeAreaInsets"),this.safeAreaInsetTop=E("top"),this.safeAreaInsetBottom=E("bottom"),this.safeAreaInsetLeft=E("left"),this.safeAreaInsetRight=E("right"),this.contentSafeAreaInsets=p.getter("contentSafeAreaInsets"),this.contentSafeAreaInsetTop=M("top"),this.contentSafeAreaInsetBottom=M("bottom"),this.contentSafeAreaInsetLeft=M("left"),this.contentSafeAreaInsetRight=M("right");const ce=G({isTma:C,returns:"task"}),me=G({isTma:C,returns:"either"}),li=G({isTma:C,requires:"web_app_request_fullscreen",version:$,returns:"task"}),En=F=>li(re=>d(f(F?"web_app_request_fullscreen":"web_app_exit_fullscreen",["fullscreen_changed","fullscreen_failed"],re),Jr(B=>B.event==="fullscreen_failed"&&B.payload.error!=="ALREADY_FULLSCREEN"?tt(new Ms(B.payload.error)):(p.setState({isFullscreen:"is_fullscreen"in B.payload?B.payload.is_fullscreen:!0}),N(void 0)))));this.isMounted=A.isMounted,this.mountFp=ce(A.mount),this.mount=x(this.mountFp),this.isFullscreen=p.getter("isFullscreen"),this.requestFullscreenFp=En(!0),this.requestFullscreen=x(this.requestFullscreenFp),this.exitFullscreenFp=En(!1),this.exitFullscreen=x(this.exitFullscreenFp);const Re=j(!1);this.isCssVarsBound=y(Re),this.bindCssVarsFp=me(F=>{if(Re())return L(new gt());F||(F=B=>`--tg-viewport-${Jt(B)}`);const re=[["height",this.height],["stableHeight",this.stableHeight],["width",this.width],["safeAreaInsetTop",this.safeAreaInsetTop],["safeAreaInsetBottom",this.safeAreaInsetBottom],["safeAreaInsetLeft",this.safeAreaInsetLeft],["safeAreaInsetRight",this.safeAreaInsetRight],["contentSafeAreaInsetTop",this.contentSafeAreaInsetTop],["contentSafeAreaInsetBottom",this.contentSafeAreaInsetBottom],["contentSafeAreaInsetLeft",this.contentSafeAreaInsetLeft],["contentSafeAreaInsetRight",this.contentSafeAreaInsetRight]].reduce((B,[H,z])=>{const U=F(H);if(U){const An=()=>{mt(U,`${z()}px`);};B.push({update:An,removeListener:z.sub(An),cssVar:U});}return B;},[]);return re.forEach(B=>{B.update();}),Re.set(!0),S(()=>{re.forEach(B=>{B.removeListener(),vt(B.cssVar);}),Re.set(!1);});}),this.bindCssVars=x(this.bindCssVarsFp),this.expandFp=me(()=>_("web_app_expand")),this.expand=x(this.expandFp);}}function oi(){const e=s=>({on:a=>{ne(s,a);},off:a=>{Ae(s,a);}}),t=e("viewport_changed"),n=e("fullscreen_changed"),r=e("safe_area_changed"),i=e("content_safe_area_changed");return new ii({...d(be(),je("viewport"),Ve,Be,Us),isFullscreen(){return d(de(),W(s=>!!s.tgWebAppFullscreen));},isViewportStable(){return d(de(),W(s=>["macos","tdesktop","unigram","webk","weba","web"].includes(s.tgWebAppPlatform)));},offContentSafeAreaInsetsChanged:i.off,offFullscreenChanged:n.off,offSafeAreaInsetsChanged:r.off,offViewportChanged:t.off,onContentSafeAreaInsetsChanged:i.on,onFullscreenChanged:n.on,onSafeAreaInsetsChanged:r.on,onViewportChanged:t.on});}const ai=oi();function ui(e={}){const{version:t,isInlineMode:n,themeParams:r}=e;if(t&&typeof n=="boolean"&&r)bt.set(t),$n.set(n),yt.set(r);else{const u=d(de(),Xe(l=>l,l=>{bt.set(t||l.tgWebAppVersion),$n.set(typeof n=="boolean"?n:!!l.tgWebAppBotInline),yt.set(r||l.tgWebAppThemeParams);}));if(u)return L(u);}e.postEvent&&Sn.set(e.postEvent);const[i,s]=at(ne("reload_iframe",()=>{_e().log("Received a request to reload the page"),Vs("iframe_will_reload"),window.location.reload();})),{acceptCustomStyles:a=!0}=e;if(a){const u=document.createElement("style");u.id="telegram-custom-styles",document.head.appendChild(u),i(ne("set_custom_style",l=>{u.innerHTML=l;}),()=>{document.head.removeChild(u);});}return d(Me("iframe_ready",{reload_supported:!0}),W(()=>(_e().log("The package was initialized"),s)));}const ci=ue(ui);return R.backButton=Ds,R.emitEvent=$e,R.hapticFeedback=Hs,R.init=ci,R.initData=Ks,R.isTMA=Es,R.mainButton=ti,R.miniApp=si,R.mockTelegramEnv=As,R.retrieveLaunchParams=bs,R.retrieveRawInitData=ms,R.viewport=ai,Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),R;}({});globalThis.TmaSdk=TmaSdk;}).call(root);})(// The environment-specific global.
function(){if(typeof globalThis!=='undefined')return globalThis;if(typeof self!=='undefined')return self;if(typeof window!=='undefined')return window;if(typeof global!=='undefined')return global;if(typeof this!=='undefined')return this;return{};}.call(this));